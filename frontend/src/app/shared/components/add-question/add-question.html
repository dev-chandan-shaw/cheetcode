<div class="form-container">
  <form nz-form [formGroup]="validateForm" (ngSubmit)="submitForm()" nzLayout="vertical">

    <!-- Title -->
    <nz-form-item>
      <nz-form-label nzFor="title" nzRequired>Title</nz-form-label>
      <nz-form-control nzErrorTip="Please input the question title!">
        <input nz-input id="title" formControlName="title" placeholder="e.g., Two Sum" />
      </nz-form-control>
    </nz-form-item>

    <!-- Link -->
    <nz-form-item>
      <nz-form-label nzFor="link" nzRequired>Link</nz-form-label>
      <nz-form-control [nzErrorTip]="linkErrorTpl">
        <input nz-input id="link" formControlName="link" placeholder="https://example.com/problems/two-sum" />
        <ng-template #linkErrorTpl let-control>
          <ng-container *ngIf="control.hasError('required')">Please input the URL!</ng-container>
          <ng-container *ngIf="control.hasError('pattern')">The input is not a valid URL!</ng-container>
        </ng-template>
      </nz-form-control>
    </nz-form-item>

    <!-- Category -->
    <nz-form-item>
      <nz-form-label nzFor="category" nzRequired>Category</nz-form-label>
      <nz-form-control nzErrorTip="Please select a category!">
        <nz-select id="category" formControlName="categoryId" nzPlaceHolder="Select a category">
          @for (category of categories(); track $index) {
            <nz-option [nzLabel]="category.name" [nzValue]="category.id"></nz-option>
          }
        </nz-select>
      </nz-form-control>
    </nz-form-item>

    <!-- Difficulty -->
    <nz-form-item>
      <nz-form-label nzFor="difficulty" nzRequired>Difficulty</nz-form-label>
      <nz-form-control nzErrorTip="Please select a difficulty level!">
        <nz-select id="difficulty" formControlName="difficulty" nzPlaceHolder="Select a difficulty level">
          @for (difficulty of DIFFICULTIES; track $index) {
            <nz-option [nzLabel]="difficulty" [nzValue]="difficulty"></nz-option>
          }
        </nz-select>
      </nz-form-control>
    </nz-form-item>

    <!-- Submit -->
    <nz-form-item>
      <nz-form-control>
        <button nz-button nzType="primary" type="submit" [nzLoading]="isLoading()" [disabled]="validateForm.invalid" class="w-full">
          <nz-icon nzType="poweroff" />
          <span style="margin-left: 8px;">Add Question</span>
        </button>
      </nz-form-control>
    </nz-form-item>

  </form>
</div>
